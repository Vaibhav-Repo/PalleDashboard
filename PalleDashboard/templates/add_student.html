{% extends 'base.html' %}
{% block content %}

<style>
  body {
    background: #0d0d0d;
    font-family: 'Poppins', sans-serif;
    color: #e6e6e6;
    padding: 40px;
  }

  form {
    max-width: 700px;
    margin: auto;
    background: #1a1a1a;
    padding: 30px;
    border-radius: 16px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6);
  }

  label {
    font-weight: 600;
    display: block;
    margin-top: 15px;
    margin-bottom: 6px;
    color: #f0f0f0;
  }

  input[type="text"],
  input[type="email"],
  input[type="number"],
  select {
    width: 100%;
    padding: 12px;
    background: #2a2a2a;
    border: 1px solid #444;
    border-radius: 8px;
    color: #fff;
    font-size: 15px;
    margin-bottom: 10px;
    transition: 0.2s ease-in-out;
  }

  input[type="text"]:focus,
  input[type="email"]:focus,
  input[type="number"]:focus,
  select:focus {
    border-color: #00ffd5;
    outline: none;
    background: #1e1e1e;
  }

  input[type="radio"],
  input[type="checkbox"] {
    margin-right: 6px;
  }

  button {
    margin-top: 20px;
    background: #00ffd5;
    color: #000;
    padding: 12px 22px;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: 0.2s ease-in-out;
  }

  button:hover {
    background: #00c4aa;
  }

  /* For better spacing on smaller screens */
  @media (max-width: 768px) {
    form {
      padding: 20px;
    }
  }
</style>

<form method="post">
   {% csrf_token %}


   <!-- Added By -->
   <label for="added_by">Added By:</label><br>
   <select id="added_by" name="added_by" required>
       {% if request.user.role == 'admin' %}
           <option value="">Select user</option>
           {% for user in users %}
               <option value="{{ user.id }}" {% if student and student.added_by.id == user.id %}selected{% endif %}>
                   {{ user.username }}
               </option>
           {% endfor %}
       {% else %}
           <option value="{{ request.user.id }}" selected>{{ request.user.username }}</option>
       {% endif %}
   </select><br><br>


   <!-- Name -->
   <label>Name:</label><br>
   <input type="text" name="name" value="{{ student.name|default_if_none:'' }}" required><br><br>


   <!-- Email -->
   <label>Email:</label><br>
   <input type="email" name="email" value="{{ student.email|default_if_none:'' }}" required><br><br>
   {% if messages %}
      <ul style="list-style-type: none; padding: 0;">
   {% for message in messages %}
     <li style="color: red; font-weight: bold;">{{ message }}</li>
   {% endfor %}
      </ul>
   {% endif %}



   <!-- Age -->
   <label>Age:</label><br>
   <input type="number" name="age" value="{{ student.age|default_if_none:'' }}" required><br><br>


   <!-- Place -->
   <label>Place:</label><br>
   <input type="text" name="place" value="{{ student.place|default_if_none:'' }}" required><br><br>


   <!-- Gender -->
   <label>Gender:</label><br>
   <input type="radio" name="gender" value="Male" {% if student.gender == 'Male' %}checked{% endif %}> Male<br>
   <input type="radio" name="gender" value="Female" {% if student.gender == 'Female' %}checked{% endif %}> Female<br>
   <input type="radio" name="gender" value="Other" {% if student.gender == 'Other' %}checked{% endif %}> Other<br><br>


   <!-- Skillset (Checkboxes) -->
   <label>Skillset:</label><br>
<input type="checkbox" name="skillset" value="Django" {% if 'Django' in skills %}checked{% endif %}> Django<br>
<input type="checkbox" name="skillset" value="HTML" {% if 'HTML' in skills %}checked{% endif %}> HTML<br>
<input type="checkbox" name="skillset" value="CSS" {% if 'CSS' in skills %}checked{% endif %}> CSS<br>
<input type="checkbox" name="skillset" value="JavaScript" {% if 'JavaScript' in skills %}checked{% endif %}> JavaScript<br><br>




   <!-- State (Dropdown) -->
   <label for="state">State:</label><br>
   <select id="state" name="state" required>
       <option value="">Select State</option>
       <option value="AP" {% if student.state == 'AP' %}selected{% endif %}>Andhra Pradesh (AP)</option>
       <option value="TS" {% if student.state == 'TS' %}selected{% endif %}>Telangana (TS)</option>
       <option value="KA" {% if student.state == 'KA' %}selected{% endif %}>Karnataka (KA)</option>
       <option value="TL" {% if student.state == 'TL' %}selected{% endif %}>Tamil Nadu (TL)</option>
   </select><br><br>


{% if invalid_email %}
  <button type="submit">{% if student %}Update{% else %}Add{% endif %} Student</button>
{% else %}
  <button type="submit">Add Student</button>
{% endif %}

</form>


{% endblock %}
